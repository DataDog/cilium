campaigner_settings:
  name: "Bump Cilium image"
  owner: "Compute"
  slack_channel: "${SLACK_CHANNEL}"
  description: "Campaign to bump Cilium image"
  manual_refresh: false
  make_edits: true
  draft: false
  batch_pr: true
  allow_automerge: ${AUTO_MERGE}
github:
  repos:
    - repo: k8s-platform-resources
      branch: master
  pull_request:
    branch_name: "campaign/${BRANCH_NAME}"
    title: Bump Cilium ${CI_COMMIT_TAG} image to the latest version
    description: This pull request bumps the Cilium ${CI_COMMIT_TAG} image to its latest version.
    default_commit_msg: "chore: bump Cilium ${CI_COMMIT_TAG} image to the latest version"
file_patterns:
  root: .
  regex:
   - k8s/k8s-platform-cluster-cni/values.yaml
   - k8s/k8s-platform-cilium-control-plane/values.yaml
   - k8s/k8s-platform-cilium-pre-flight/values.yaml
changes:
  - op: "custom/search_and_replace"
    key: !perl/regexp "\"${CI_COMMIT_TAG}[a-z0-9-]*\".*since.*"
    value: "\"${IMAGE_TAG}\" # since ${CURRENT_DATE}"
